struct X[T]:
    v: T
    fun new(v: T): @v = v :: T
    fun f -> T: return @v
    fun [](x: T) -> T: return x

fun f -> X[char]:
    let x = new X[char](7)
    x.f()
    return x

fun main -> int:
    let x = f()
    print(tos(x.v :: int))
    print(tos(x.f() :: int))
    print(tos(x[2] :: int))
    return 0

#[
RUN
7
7
2
]#
